
//  Park NPCs in deArnise Keep

//  Fade SoA

EXTEND_BOTTOM E3FADEP 74
IF ~G("RjaliFadeScout",2)
    !G("KeepPlot",0)~ THEN REPLY @0 GOTO RJParkFadeSOA
END

APPEND E3FADEP

IF ~~ THEN BEGIN RJParkFadeSOA
  SAY @1200
  IF ~~ THEN DO ~SetGlobal("RJParkFA","GLOBAL",1)
                 IncrementGlobal("RJCntParked","GLOBAL",1)
                 EscapeAreaMove("AR1305",2543,418,0)~ EXIT
END

IF WEIGHT #-1 ~G("RJParkFA",1)~ THEN BEGIN RJVisitFadeSOA
  SAY @1201
  IF ~~ THEN REPLY @13 EXIT
  IF ~~ THEN REPLY @1202 DO ~
                 SetGlobal("RJParkFA","GLOBAL",0)
                 IncrementGlobal("RJCntParked","GLOBAL",-1)
                 JoinParty()~ EXIT
  IF ~RandomNum(3,1)~ THEN REPLY @9 GOTO RJVFASOA1
  IF ~RandomNum(3,2)~ THEN REPLY @9 GOTO RJVFASOA2
  IF ~RandomNum(3,3)~ THEN REPLY @9 GOTO RJVFASOA3
  IF ~~ THEN REPLY @11 GOTO RJVFASOA4
  IF ~~ THEN REPLY @1211 GOTO RJVFASOA5
  IF ~~ THEN REPLY @8 GOTO RJVFASOA6
END

IF ~~ THEN BEGIN RJVFASOA1
  SAY @1235 = @1236 = @1237 = @1238
  IF ~~ THEN REPLY @1239 EXIT
END

IF ~~ THEN BEGIN RJVFASOA2
  SAY @1240 = @1241
  IF ~~ THEN REPLY @1242 EXIT
END

IF ~~ THEN BEGIN RJVFASOA3
  SAY @1243 = @1244
  IF ~~ THEN REPLY @1245 EXIT
END

IF ~~ THEN BEGIN RJVFASOA4
  SAY @1224
  IF ~~ THEN REPLY @1225 EXIT
END

IF ~~ THEN BEGIN RJVFASOA5
  SAY @1212 = @1213 = @1214
  IF ~~ THEN REPLY @1215 EXIT
END

IF ~~ THEN BEGIN RJVFASOA6
  SAY @1203 = @1204 = @1205
  IF ~~ THEN REPLY @1106 EXIT
END

END

//   Fade ToB

EXTEND_BOTTOM E3FAD25P 2
IF ~G("E3FADERomanceActive",2)~ THEN REPLY @0 GOTO RJParkFadeTOB
END

APPEND E3FAD25P

IF ~~ THEN BEGIN RJParkFadeTOB
  SAY @1200
  IF ~~ THEN DO ~SetGlobal("RJParkFA","GLOBAL",1)
                 IncrementGlobal("RJCntParked","GLOBAL",1)
                 EscapeAreaMove("AR1305",2543,418,0)~ EXIT
END

IF WEIGHT #-1 ~G("RJParkFA",1)~ THEN BEGIN RJVisitFadeTOB
  SAY @1201
  IF ~G("RJFinalVisit",1) G("RJFAFV",0)~ THEN REPLY @14 GOTO RJVFATOB9
  IF ~~ THEN REPLY @13 EXIT
  IF ~~ THEN REPLY @1202 DO ~
                 SetGlobal("RJParkFA","GLOBAL",0)
                 IncrementGlobal("RJCntParked","GLOBAL",-1)
                 JoinParty()~ EXIT
  IF ~RandomNum(3,1)~ THEN REPLY @9 GOTO RJVFATOB1
  IF ~RandomNum(3,2)~ THEN REPLY @9 GOTO RJVFATOB2
  IF ~RandomNum(3,3)~ THEN REPLY @9 GOTO RJVFATOB3
  IF ~~ THEN REPLY @11 GOTO RJVFATOB4
  IF ~~ THEN REPLY @1216 GOTO RJVFATOB5
  IF ~~ THEN REPLY @8 GOTO RJVFATOB6
END

IF ~~ THEN BEGIN RJVFATOB1
  SAY @1246 = @1247 = @1248 = @1249 = @1250 = @1251
  IF ~~ THEN REPLY @1252 EXIT
END

IF ~~ THEN BEGIN RJVFATOB2
  SAY @1253 = @1254
  IF ~~ THEN REPLY @1255 EXIT
END

IF ~~ THEN BEGIN RJVFATOB3
  SAY @1256
  IF ~~ THEN REPLY @1257 EXIT
END

IF ~~ THEN BEGIN RJVFATOB4
  SAY @1226 = @1227 = @1228 = @1229
  IF ~~ THEN REPLY @1230 EXIT
END

IF ~~ THEN BEGIN RJVFATOB5
  SAY @1217 = @1218 = @1219 = @1220 = @1221 = @1222
  IF ~~ THEN REPLY @1223 EXIT
END

IF ~~ THEN BEGIN RJVFATOB6
  SAY @1207 = @1208 = @1209
  IF ~~ THEN REPLY @1210 EXIT
END

IF ~~ THEN BEGIN RJVFATOB9
  SAY @1231 = @1232 = @1233
  IF ~~ THEN REPLY @1234 DO ~SetGlobal("RJFAFV","GLOBAL",1)~ EXIT
END

END
