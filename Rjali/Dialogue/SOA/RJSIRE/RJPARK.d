
//  Park NPCs in deArnise Keep

//  Sirene SoA

EXTEND_BOTTOM C0SIRE2P 5
IF ~G("RjaliSireneScout",2)
    G("C0SireneRomanceActive",2)
    !G("KeepPlot",0)~ THEN REPLY @0 GOTO RJParkSireneSOA
END

APPEND C0SIRE2P

IF ~~ THEN BEGIN RJParkSireneSOA
  SAY @1300
  IF ~~ THEN DO ~SetGlobal("RJParkSI","GLOBAL",1)
                 IncrementGlobal("RJCntParked","GLOBAL",1)
                 EscapeAreaMove("AR1307",1626,1460,8)~ EXIT
END

IF WEIGHT #-1 ~G("RJParkSI",1)~ THEN BEGIN RJVisitSireneSOA
  SAY @1301
  IF ~~ THEN REPLY @13 EXIT
  IF ~~ THEN REPLY @7 DO ~SetGlobal("RJParkSI","GLOBAL",0)
                          IncrementGlobal("RJCntParked","GLOBAL",-1)
                          JoinParty()~ EXIT
  IF ~RandomNum(3,1)~ THEN REPLY @9 GOTO RJVSISOA1
  IF ~RandomNum(3,2)~ THEN REPLY @9 GOTO RJVSISOA2
  IF ~RandomNum(3,3)~ THEN REPLY @9 GOTO RJVSISOA3
  IF ~~ THEN REPLY @11 GOTO RJVSISOA4
  IF ~~ THEN REPLY @1313 GOTO RJVSISOA5
  IF ~~ THEN REPLY @8 GOTO RJVSISOA6
END

IF ~~ THEN BEGIN RJVSISOA1
  SAY @1314 = @1315 = @1316
  IF ~~ THEN REPLY @1317 EXIT
END

IF ~~ THEN BEGIN RJVSISOA2
  SAY @1318 = @1319 = @1320
  IF ~~ THEN REPLY @1321 EXIT
END

IF ~~ THEN BEGIN RJVSISOA3
  SAY @1322 = @1323 = @1324 = @1325 = @1326
  IF ~~ THEN REPLY @1327 EXIT
END

IF ~~ THEN BEGIN RJVSISOA4
  SAY @1302 = @1303 = @1304
  IF ~~ THEN REPLY @1305 EXIT
END

IF ~~ THEN BEGIN RJVSISOA5
  SAY @1310 = @1311
  IF ~~ THEN REPLY @1312 EXIT
END

IF ~~ THEN BEGIN RJVSISOA6
  SAY @1306 = @1307 = @1308
  IF ~~ THEN REPLY @1309 EXIT
END

END

//   Sirene ToB

EXTEND_BOTTOM C0SIR25P 1
IF ~G("C0SireneRomanceActive",2)~ THEN REPLY @0 GOTO RJParkSireneTOB
END

APPEND C0SIR25P

IF ~~ THEN BEGIN RJParkSireneTOB
  SAY @1300
  IF ~~ THEN DO ~SetGlobal("RJParkSI","GLOBAL",1)
                 IncrementGlobal("RJCntParked","GLOBAL",1)
                 EscapeAreaMove("AR1307",1626,1460,8)~ EXIT
END

IF WEIGHT #-1 ~G("RJParkSI",1)~ THEN BEGIN RJVisitSireneTOB
  SAY @1301
  IF ~G("RJFinalVisit",1) G("RJSIFV",0)~ THEN REPLY @14 GOTO RJVSITOB9
  IF ~~ THEN REPLY @13 EXIT
  IF ~~ THEN REPLY @7 DO ~SetGlobal("RJParkSI","GLOBAL",0)
                          IncrementGlobal("RJCntParked","GLOBAL",-1)
                          JoinParty()~ EXIT
  IF ~RandomNum(3,1)~ THEN REPLY @9 GOTO RJVSITOB1
  IF ~RandomNum(3,2)~ THEN REPLY @9 GOTO RJVSITOB2
  IF ~RandomNum(3,3)~ THEN REPLY @9 GOTO RJVSITOB3
  IF ~~ THEN REPLY @11 GOTO RJVSITOB4
  IF ~~ THEN REPLY @1350 GOTO RJVSITOB5
  IF ~~ THEN REPLY @8 GOTO RJVSITOB6
END

IF ~~ THEN BEGIN RJVSITOB1
  SAY @1366 = @1367 = @1368
  IF ~~ THEN REPLY @1369 EXIT
END

IF ~~ THEN BEGIN RJVSITOB2
  SAY @1370 = @1371 = @1372 = @1373 = @1374
  IF ~~ THEN REPLY @1375 EXIT
END

IF ~~ THEN BEGIN RJVSITOB3
  SAY @1376 = @1377
  IF ~~ THEN REPLY @1378 EXIT
END

IF ~~ THEN BEGIN RJVSITOB4
  SAY @1354 = @1355 = @1356
  IF ~~ THEN REPLY @1357 EXIT
END

IF ~~ THEN BEGIN RJVSITOB5
  SAY @1351 = @1352
  IF ~~ THEN REPLY @1353 EXIT
END

IF ~~ THEN BEGIN RJVSITOB6
  SAY @1358 = @1359 = @1360
  IF ~~ THEN REPLY @1361 EXIT
END

IF ~~ THEN BEGIN RJVSITOB9
  SAY @1362 = @1363 = @1364
  IF ~~ THEN REPLY @1365 DO ~SetGlobal("RJSIFV","GLOBAL",1)~ EXIT
END

END
